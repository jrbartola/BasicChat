<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!--[if IE]>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <![endif]-->
    <title>Basic Chat</title>
    <style type="text/css">
      body { background-color:lightgray;}
      
      /*div.tabContent { border: 1px solid #c9c3ba; padding: 0.5em; background-color: #f1f0ee; }*/
      div.tabContent.hide { display: none; }
      .message-wrap {    border: 1px solid black; border-radius: 25px; box-shadow: 15px 15px 10px #888888;}
      .hoverable {border-radius:15px;}
    </style>
    <script src="/js/jquery-1.11.1.js"></script>
    <script type="text/javascript" src="/js/materialize.min.js"></script>
    <script type="text/javascript" src="/js/materialize.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="/css/materialize.min.css"  media="screen,projection"/>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/react/0.12.0/react.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/react/0.12.0/JSXTransformer.js"></script>
    <!-- CUSTOM STYLE CSS -->
</head>
<script src="/socket.io/socket.io.js"></script>

<script src="//www.parsecdn.com/js/parse-1.6.7.min.js"></script>
    <!-- CORE BOOTSTRAP SCRIPTS  FILE -->

<script src="/js/tabs.js" type="text/javascript"></script>
</head>
<script type="text/javascript"> 
$(document).ready(function() {
    init();
    var chatsocket = io();

    $.getJSON("/api/user", function(user) {
        if (user.username) {
            $("#profile").html(user.username);
            chatsocket.emit("loadUser", user);
        }
    });
    

});
</script>
<body>

<nav class="red darken-4">
    <div class="nav-wrapper">
      <a href="#" class="brand-logo center">Basic Chat</a>
      <ul id="nav-mobile" class="left hide-on-med-and-down">
        <li><a href="/"><i class="material-icons left">store</i>Home</a></li>
        <li><a href="/chat">Chat</a></li>
        <li><a id="profile" href="#">Profile</a></li>
      </ul>
      <ul class="right hide-on-med-and-down">
        <li><a id="logout" href="/logout">Log out</a></li>
      </ul>
    </div>
  </nav>

<div class="container">
    <br/>
    <div class="row">
        <div class="col s4">
            <div class="btn-panel btn-panel-conversation">
                <a href="" class="col s6 grey lighten-5 pull-right btn red-text text-darken-4 right" role="button"><i class="fa fa-plus"></i> New Message</a>
            </div>
        </div>

        <div class="col s8">
            <div class="btn-panel btn-panel-msg">

                <a href="" class="btn col s3 grey lighten-5 red-text text-darken-4 right" role="button"><i class="fa fa-gears"></i> Settings</a>
            </div>
        </div>
    </div>
    <div class="row">

        <div class="conversation-wrap col s4" style="height:610px;overflow-y:scroll;">
            <div class="card-panel grey lighten-5 red-text text-darken-4" style="text-align:center;">
                    <strong>Conversations</strong>
            </div>
            <ul id="tabs" style="list-style-type:none;">
                <li style="testdisplay" class="hoverable" onClick="scrollToBottom();">
                <a href="#josephnash" name="josephnash">
                    <div class="media conversation" name="josephnash">
                        <div class="row">
                            <div class="pull-left col s4">
                            <img class="media-object" data-src="/img/messageicon_silver.png" alt="msgico" style="width: 50px; height: 50px;" src="/img/messageicon_silver.png" />
                            </div>
                            <div class="media-body col s8">
                            <h6 class="media-heading red-text text-darken-4">Joseph Nash</h6>
                            </div>
                        </div>
                    </div>
                </a>
                </li>
                <li style="testDisplay" class="hoverable" onClick="scrollToBottom();">
                <a href="#bobsmith" name="bobsmith">
                    <div class="media conversation" name="bobsmith">
                        <div class="row">
                            <div class="pull-left col s4">
                            <img class="media-object" data-src="/img/messageicon_silver.png" alt="msgico" style="width: 50px; height: 50px;" src="/img/messageicon_silver.png" />
                            </div>
                            <div class="media-body col s8">
                            <h6 class="media-heading red-text text-darken-4">Bob Smith</h6>
                            </div>
                        </div>
                    </div>
                </a>
                </li>
            </ul>
        </div>



        <div class="message-wrap col s8" >
            <div class="tabContent" id="josephnash">
            <div class="msg-wrap" style="height:500px;overflow-y:scroll;">


                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon_silver.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 12:10am</small>
                        <h6 class="media-heading red-text text-darken-4"> Joseph Nash</h6>
                        <small class="col s10">Sample Message</small>
                    </div>
                </div>
                <br/>
                <div class="card-panel grey lighten-5 red-text text-darken-4"  style="text-align:center;">
                    <strong>Today</strong>
                </div>
                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon_silver.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 12:10am</small>
                        <h6 class="media-heading red-text text-darken-4"> Joseph Nash</h6>
                        <small class="col s10">Sample Message</small>
                    </div>
                </div>
                <br/>
                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 1:15pm</small>
                        <h6 class="media-heading red-text text-darken-4"> Me</h6>
                        <small class="col s10">What's up dude?</small>
                    </div>
                </div>
                <br/>
                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 1:17pm</small>
                        <h6 class="media-heading red-text text-darken-4"> Me</h6>
                        <small class="col s10">Haven't seen you in a fortnight</small>
                    </div>
                </div>
                <br/>
                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon_silver.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 12:10am</small>
                        <h6 class="media-heading red-text text-darken-4"> Joseph Nash</h6>
                        <small class="col s10">Sample Message</small>
                    </div>
                </div>
                <br/>
                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 1:15pm</small>
                        <h6 class="media-heading red-text text-darken-4"> Me</h6>
                        <small class="col s10">What's up dude?</small>
                    </div>
                </div>
                <br/>
                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 1:17pm</small>
                        <h6 class="media-heading red-text text-darken-4"> Me</h6>
                        <small class="col s10">Haven't seen you in a fortnight</small>
                    </div>
                </div>
                <br/>
                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon_silver.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 12:10am</small>
                        <h6 class="media-heading red-text text-darken-4"> Joseph Nash</h6>
                        <small class="col s10">Sample Message</small>
                    </div>
                </div>
                <br/>
                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 1:15pm</small>
                        <h6 class="media-heading red-text text-darken-4"> Me</h6>
                        <small class="col s10">What's up dude?</small>
                    </div>
                </div>
                <br/>
            </div>
            </div>

            <div class="tabContent" id="bobsmith">
            <div class="msg-wrap" style="height:500px;overflow-y:scroll;">

                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 1:17pm</small>
                        <h6 class="media-heading red-text text-darken-4"> Me</h6>
                        <small class="col s10">Haven't seen you in a fortnight</small>
                    </div>
                </div>
                <br/>
                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon_silver.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 12:10am</small>
                        <h6 class="media-heading red-text text-darken-4"> Joseph Nash</h6>
                        <small class="col s10">Sample Message</small>
                    </div>
                </div>
                <br/>
                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 1:15pm</small>
                        <h6 class="media-heading red-text text-darken-4"> Me</h6>
                        <small class="col s10">What's up dude?</small>
                    </div>
                </div>
                <br/>
                <div class="media msg">
                    <a class="left" href="#">
                        <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 32px; height: 32px;" src="/img/messageicon.png">
                    </a>
                    <div class="media-body">
                        <small class="right time"><i class="fa fa-clock-o"></i> 1:17pm</small>
                        <h6 class="media-heading red-text text-darken-4"> Me</h6>
                        <small class="col s10">Haven't seen you in a fortnight</small>
                    </div>
                </div>
                <br/>

            </div>
            </div>
            <div class="divider"></div>

                <form id="messagebox" method="post" onChange={this.props.onChange} enctype="multipart/form-data">
                    <div class="send-wrap ">
                        <textarea class="materialize-textarea red-text text-darken-4" name="message" placeholder="Write a reply..." style="resize:none;" ></textarea>
                    </div>
                    <div class="btn-panel">
                        <input type="hidden" form="messagebox" id="hiddenrecip" value="" name="recipient" />
                        <button type="button" class="btn grey lighten-5 red-text text-darken-4"
                            onClick={this.addFile} ><i class="fa fa-upload"></i> Add Picture</button>
                
                        <input type="file" style="display:none;" form="messagebox" onChange={this.displayFile} name="advisorpic" id="addedpic" accept="image/*" />
                        <button type="button" onClick="sendmsg()" id="submitform" class="col s3 btn right grey lighten-5 red-text text-darken-4"><i class="fa fa-comment"></i> Send Message</button>
                    </div>
                    <label class="col s2" id="uploadedfile"></label>
                    <label class="col s2 right" id="charcount"></label>
                </form>
        </div>
    </div>
</div>